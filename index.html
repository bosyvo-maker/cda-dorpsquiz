<index>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <title>CDA Zandvoort – Dorpsquiz</title>

  <style>
    :root{
      --cda-green:#007b5e;
      --cda-green-dark:#005844;
      --cda-sand:#f2d7a0;
      --cda-sky:#b7e3ff;
      --cda-blue:#0077b6;
      --cda-red:#e63946;

      --radius-lg:18px;
      --shadow-soft:0 14px 30px rgba(0,0,0,.12);
      --shadow-card:0 8px 20px rgba(0,0,0,.04);
    }

    *{ box-sizing:border-box; margin:0; padding:0; font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif; }
    html,body{ height:100%; }
    body{
      min-height:100vh;
      background: radial-gradient(circle at top, var(--cda-sand) 0, #ffffff 38%, var(--cda-sky) 100%);
      padding:20px;
      overflow-y:auto;
    }

    #cda-dorpsquiz{ width:100%; }

    .app{
      width:100%;
      max-width:980px;
      margin:0 auto;
      background:rgba(255,255,255,.96);
      border:3px solid var(--cda-sand);
      border-radius:24px;
      box-shadow:var(--shadow-soft);
      overflow:hidden;
    }

    header{
      padding:22px 26px 10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      border-bottom:1px solid rgba(0,0,0,.06);
      background: linear-gradient(180deg, rgba(242,215,160,.35), rgba(255,255,255,0));
    }

    .brand{ display:flex; align-items:center; gap:12px; min-width:0; }
    .brand-logo{
      width:70px; height:70px;
      border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #ffffff 0, var(--cda-green) 55%, var(--cda-green-dark) 100%);
      display:flex; align-items:center; justify-content:center;
      color:#fff; font-weight:900; font-size:20px;
      box-shadow:0 6px 16px rgba(0,0,0,.22);
      flex:0 0 auto;
      letter-spacing:.02em;
    }
    .brand-text{ min-width:0; }
    .brand-text h1{
      font-size:20px; color:#12302a; margin-bottom:2px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .brand-text p{ font-size:13px; color:#4b635d; }
    .brand-text p strong{ color:var(--cda-green-dark); }

    .badge-election{
      padding:7px 12px;
      border-radius:999px;
      background:linear-gradient(135deg, var(--cda-green), var(--cda-green-dark));
      color:#fff;
      font-size:11px;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:.08em;
      display:inline-flex;
      align-items:center;
      gap:8px;
      flex:0 0 auto;
    }
    .badge-dot{ width:8px; height:8px; border-radius:50%; background:#3cffb3; box-shadow:0 0 0 3px rgba(60,255,179,.18); }

    main{
      display:flex;
      flex-wrap:wrap;
      align-items:stretch;
    }

    /* Linkerkolom */
    .quiz-panel{
      flex:1 1 560px;
      padding:20px 26px 24px;
      border-right:1px solid rgba(0,0,0,.06);

      display:flex;
      flex-direction:column;
      gap:14px;
      min-width:320px;
    }

    /* Rechterkolom */
    .side-panel{
      flex:1 1 320px;
      padding:22px 22px 22px 18px;
      background: radial-gradient(circle at top left, rgba(242,215,160,.45) 0, #f7f0df 40%, #f9f9ff 100%);
      display:flex;
      flex-direction:column;
      gap:14px;
      min-width:280px;
    }

    .intro{ margin-bottom:10px; }
    .intro-title{ font-size:22px; margin-bottom:6px; color:#102620; }
    .intro-subtitle{ font-size:14px; color:#5b706b; line-height:1.4; }
    .intro-subtitle strong{ color:var(--cda-green-dark); }

    .progress-bar-wrapper{ margin:10px 0 8px; }
    .progress-header{
      display:flex; justify-content:space-between; align-items:center;
      font-size:12px; color:#6b7f79; margin-bottom:6px;
    }
    .progress-track{
      position:relative; width:100%; height:9px;
      border-radius:999px; background:#edf2f7; overflow:hidden;
    }
    .progress-fill{
      position:absolute; inset:0 auto 0 0;
      width:0%;
      border-radius:inherit;
      background:linear-gradient(90deg, var(--cda-green), var(--cda-blue));
      transition:width .35s ease;
    }

    .question-card{
      background:#fff;
      border-radius:var(--radius-lg);
      border:1px solid rgba(0,0,0,.05);
      padding:18px 18px 16px;
      box-shadow:var(--shadow-card);
    }

    .question-theme-tag{
      display:inline-flex; align-items:center; gap:6px;
      padding:4px 9px; border-radius:999px;
      background:rgba(0,123,94,.08);
      color:#205144;
      font-size:11px;
      font-weight:800;
      text-transform:uppercase;
      letter-spacing:.08em;
      margin-bottom:10px;
    }
    .question-theme-tag .dot{
      width:8px; height:8px; border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #ffffff 0, var(--cda-green) 65%);
    }

    .question-text{
      font-size:17px; line-height:1.45; color:#10211c; margin-bottom:14px;
    }

    .options-list{ list-style:none; display:flex; flex-direction:column; gap:10px; margin-bottom:12px; }
    .option{
      border-radius:16px;
      border:1px solid #d0dde0;
      padding:12px 14px;
      font-size:14px;
      display:flex;
      align-items:flex-start;
      gap:10px;
      background:#fff;
      cursor:pointer;
      transition:border-color .18s ease, box-shadow .18s ease, transform .05s ease, background .2s ease;
      width:100%;
      text-align:left;
      line-height:1.35;
    }
    .option:hover{
      border-color:var(--cda-green);
      box-shadow:0 0 0 1px rgba(0,123,94,.16);
      transform:translateY(-1px);
    }
    .option.disabled{ cursor:default; opacity:.92; transform:none; box-shadow:none; }
    .option-label{
      width:26px; height:26px; border-radius:50%;
      border:2px solid #c7d3d8;
      display:inline-flex; align-items:center; justify-content:center;
      font-size:12px; font-weight:900;
      background:#f8fbfc;
      flex:0 0 auto;
      margin-top:1px;
    }
    .option-text{ flex:1; color:#12302a; }

    .option.correct{
      border-color:var(--cda-green);
      background:linear-gradient(90deg, rgba(0,123,94,.10), rgba(255,255,255,.95));
    }
    .option.incorrect{
      border-color:var(--cda-red);
      background:linear-gradient(90deg, rgba(230,57,70,.10), rgba(255,255,255,.95));
    }
    .option.correct .option-label{ border-color:var(--cda-green); background:var(--cda-green); color:#fff; }
    .option.incorrect .option-label{ border-color:var(--cda-red); background:var(--cda-red); color:#fff; }

    .explanation{
      font-size:13px;
      color:#4e5f5a;
      padding:10px 12px;
      border-radius:12px;
      background:#f3faf7;
      border:1px dashed rgba(0,123,94,.28);
      margin-bottom:10px;
      display:none;
      line-height:1.45;
    }
    .explanation strong{ color:var(--cda-green-dark); }

    .quiz-footer{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-top:6px;
      flex-wrap:wrap;
    }

    .score-pill{
      font-size:12px;
      color:#546663;
      background:#edf2f7;
      border-radius:999px;
      padding:6px 11px;
      display:inline-flex;
      align-items:center;
      gap:6px;
      white-space:nowrap;
    }
    .score-dot{ width:8px; height:8px; border-radius:50%; background:var(--cda-green); }

    button{
      border:none;
      border-radius:999px;
      padding:10px 18px;
      font-size:13px;
      font-weight:900;
      letter-spacing:.03em;
      text-transform:uppercase;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      transition:transform .08s ease, box-shadow .12s ease, filter .12s ease;
      -webkit-tap-highlight-color:transparent;
    }
    button:active{ transform:translateY(1px) scale(.99); filter:brightness(.96); }

    .btn-primary{
      background:linear-gradient(135deg, var(--cda-green), var(--cda-green-dark));
      color:#fff;
      box-shadow:0 10px 20px rgba(0,123,94,.25);
    }
    .btn-secondary{
      background:#fff;
      color:#35524b;
      border:1px solid #c5d1cf;
    }
    .btn-primary[disabled], .btn-secondary[disabled]{ opacity:.55; cursor:default; box-shadow:none; }

    .results-banner{
      margin-top:12px;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid rgba(0,0,0,.06);
      background:linear-gradient(130deg, rgba(0,123,94,.12), rgba(0,119,182,.06));
      display:none;
      line-height:1.45;
      font-size:13px;
      color:#163029;
    }
    .results-banner strong{ color:var(--cda-green-dark); }

    .side-header{ font-size:15px; font-weight:900; color:#15352e; }
    .side-sub{ font-size:13px; color:#5f6b65; margin-top:4px; line-height:1.35; }

    .theme-chips{ display:flex; flex-wrap:wrap; gap:8px; margin-top:6px; }
    .chip{
      font-size:11px;
      padding:7px 11px;
      border-radius:999px;
      background:rgba(255,255,255,.85);
      border:1px solid rgba(0,0,0,.07);
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      transition:background .15s ease, border-color .15s ease, transform .05s ease;
    }
    .chip-dot{ width:8px; height:8px; border-radius:50%; background:var(--cda-green); }
    .chip.active{ background:#fff; border-color:var(--cda-green); transform:translateY(-1px); }

    .theme-details{
      background:rgba(255,255,255,.94);
      border-radius:16px;
      padding:12px 13px;
      border:1px solid rgba(0,0,0,.05);
      box-shadow:0 10px 24px rgba(0,0,0,.04);
      min-height:120px;
    }
    .theme-details h3{ font-size:14px; margin-bottom:4px; color:#163029; }
    .theme-details p{ font-size:13px; color:#4a5a55; line-height:1.4; }

    /* Realisatie blok (linksonder) */
    .realisatie{
      background:rgba(255,255,255,.92);
      border-radius:16px;
      padding:12px 13px;
      border:1px solid rgba(0,0,0,.05);
      box-shadow:0 10px 24px rgba(0,0,0,.04);
      margin-top:auto;
    }
    .realisatie h3{ font-size:14px; margin-bottom:6px; color:#163029; }
    .realisatie ul{ margin-left:18px; font-size:12.5px; color:#3f514c; line-height:1.4; }
    .realisatie li{ margin:4px 0; }

    .cta-card{
      margin-top:6px;
      border-radius:16px;
      padding:10px 13px 11px;
      background:linear-gradient(120deg, rgba(242,215,160,.40), rgba(0,119,182,.12));
      border:1px solid rgba(255,255,255,.75);
      backdrop-filter:blur(10px);
    }
    .cta-card strong{ display:block; font-size:14px; color:#0f2721; margin-bottom:4px; }
    .cta-card p{ font-size:12px; color:#12302a; margin-bottom:8px; line-height:1.35; }

    .cta-inline{ display:flex; align-items:center; gap:14px; flex-wrap:wrap; }
    .cta-slogan{
      display:flex;
      flex-direction:column;
      line-height:1.1;
      font-size:13px;
      color:#12302a;
      font-weight:900;
    }
    .cta-slogan span:nth-child(2){ align-self:center; }

    .share-text{ font-size:11px; margin-top:6px; color:#435450; line-height:1.35; }
    .share-text code{
      background:rgba(255,255,255,.85);
      padding:3px 6px;
      border-radius:999px;
      font-size:11px;
    }

    /* ============================
       Smartphone optimalisatie
       ============================ */
    @media (max-width: 600px){
      body{ padding:8px; }

      .app{ border-radius:18px; }

      header{
        padding:12px 12px 10px;
        flex-direction:column;
        align-items:flex-start;
        gap:8px;
      }

      .brand-logo{ width:56px; height:56px; font-size:16px; }
      .brand-text h1{ font-size:17px; line-height:1.2; }
      .brand-text p{ font-size:12px; }

      .badge-election{
        width:100%;
        justify-content:space-between;
        font-size:10px;
        padding:7px 10px;
      }

      main{ display:block; }

      .quiz-panel{
        padding:12px 12px 14px;
        border-right:none;
        border-bottom:1px solid rgba(0,0,0,.06);
        min-width:auto;
      }

      .side-panel{
        padding:12px;
        min-width:auto;
      }

      .intro-title{ font-size:18px; }
      .intro-subtitle{ font-size:13px; }

      .question-text{ font-size:16px; }

      .options-list{ gap:10px; }
      .option{ padding:14px 14px; font-size:15px; border-radius:16px; }
      .option-label{ width:28px; height:28px; font-size:12px; }

      .quiz-footer{
        flex-direction:column-reverse;
        align-items:stretch;
        gap:10px;
      }
      .quiz-footer > div:last-child{
        display:flex;
        gap:8px;
        width:100%;
      }
      .btn-primary,.btn-secondary{
        flex:1;
        padding:13px 12px;
        font-size:12px;
      }

      .cta-inline{
        flex-direction:column;
        align-items:flex-start;
        gap:8px;
      }

      /* Op mobiel niet "hard" naar onderaan duwen */
      .realisatie{ margin-top:12px; }
    }
  </style>
</head>

<body>
  <div id="cda-dorpsquiz">
    <div class="app" role="application" aria-label="CDA Zandvoort Dorpsquiz">
      <header>
        <div class="brand">
          <div class="brand-logo" aria-hidden="true">CDA</div>
          <div class="brand-text">
            <h1>CDA Zandvoort – Dorpsquiz</h1>
            <p>Ontdek in 3 minuten of jij ook een <strong>Zandvoorter voor Zandvoorters</strong> bent.</p>
          </div>
        </div>

        <div class="badge-election">
          <span class="badge-dot"></span>
          Gemeenteraadsverkiezingen – Stem Dorpspartij CDA
        </div>
      </header>

      <main>
        <section class="quiz-panel">
          <div class="intro">
            <h2 class="intro-title">
              Vraag <span id="questionNumber">1</span> van <span id="totalQuestions">0</span>
            </h2>
            <p class="intro-subtitle">
              Kies wat jij belangrijk vindt. Na elke vraag zie je kort wat <strong>CDA Zandvoort</strong> wil.
            </p>
          </div>

          <div class="progress-bar-wrapper">
            <div class="progress-header">
              <span>Voortgang</span>
              <span id="progressLabel">0%</span>
            </div>
            <div class="progress-track">
              <div class="progress-fill" id="progressFill"></div>
            </div>
          </div>

          <article class="question-card" aria-live="polite">
            <div class="question-theme-tag">
              <span class="dot"></span>
              <span id="themeName">Thema</span>
            </div>

            <p class="question-text" id="questionText">Vraagtekst…</p>
            <ul class="options-list" id="optionsList"></ul>

            <div class="explanation" id="explanationBox"></div>

            <div class="quiz-footer">
              <div class="score-pill">
                <span class="score-dot"></span>
                <span id="scoreText">0 goede antwoorden</span>
              </div>
              <div style="display:flex; gap:8px;">
                <button type="button" class="btn-secondary" id="restartBtn">Opnieuw spelen</button>
                <button type="button" class="btn-primary" id="nextBtn" disabled>
                  Volgende vraag <span aria-hidden="true">→</span>
                </button>
              </div>
            </div>

            <div class="results-banner" id="resultsBanner"></div>
          </article>

          <div class="realisatie" id="realisatieBox">
            <h3>Realisatie 2022–2026 (selectie)</h3>
            <ul>
              <li>Meer woningen toewijzen aan Zandvoorters</li>
              <li>Minimabeleid verhoogd naar 130%</li>
              <li>Watertorenplein gereed (o.a. sociale woningbouw)</li>
              <li>Duinwachter in aanbouw (sociale woningbouw voor ouderen)</li>
              <li>Spreekuur wethouders & initiatievenbudget voor wijken</li>
              <li>Meer 30 km en aanpak fiets/auto parkeren (o.a. P-Zuid / P-circuit)</li>
            </ul>
          </div>
        </section>

        <aside class="side-panel" aria-label="Thema's CDA Zandvoort">
          <div>
            <p class="side-header">Onze 12 thema’s (klik!)</p>
            <p class="side-sub">Bekijk per thema wat CDA Zandvoort de komende jaren wil bereiken.</p>
          </div>

          <div class="theme-chips" id="themeChips"></div>

          <div class="theme-details" id="themeDetails">
            <h3>Klik op een thema</h3>
            <p>Je ziet hier direct de kernpunten. (Thema’s en vragen zijn gekoppeld.)</p>
          </div>

          <div class="cta-card">
            <strong>Past dit bij jouw Zandvoort?</strong>
            <p>Dan hoor je bij ons: de dorpspartij die luistert, doorpakt en samen bouwt.</p>

            <div class="cta-inline">
              <button type="button" class="btn-primary"
                onclick="window.open('https://www.cda.nl/noord-holland/zandvoort/','_blank','noopener,noreferrer');">
                Ik stem CDA Zandvoort
              </button>

              <div class="cta-slogan" aria-label="Slogan">
                <span>Zandvoort</span>
                <span><strong>voor</strong></span>
                <span>Zandvoorters</span>
              </div>
            </div>

            <p class="share-text">
              Tip: deel na het spelen: <code>"Ik deed de CDA dorpsquiz – dit is mijn Zandvoort!"</code>
            </p>
          </div>
        </aside>
      </main>
    </div>
  </div>

  <script>
    (function () {
      function $(id){ return document.getElementById(id); }

      // Basisvragen (niet muteren)
      var baseQuestions = [
        {
          theme: "1. Wonen",
          question: "De woningnood raakt vooral jongeren, starters en senioren. Wat is volgens CDA Zandvoort de beste koers?",
          options: [
            "Ruimer bouwen voor alle doelgroepen, minder regels en vertrouwen dat de markt betaalbaarheid verbetert.",
            "Minimaal 50% voor Zandvoorters, betaalbaar bouwen én sturen met zelfbewoning en antispeculatie.",
            "Sterk inzetten op huurregulering en een gemeentelijk woonbedrijf dat vooral sociale huur realiseert."
          ],
          correctIndex: 1,
          explanation: "CDA Zandvoort wil dat Zandvoorters in Zandvoort kunnen blijven: eerlijk toewijzen, betaalbare woningbouw en rem op investeerders/onttrekking."
        },
        {
          theme: "2. Verkeer & bereikbaarheid",
          question: "Parkeerdruk is per wijk verschillend. Welke aanpak past bij CDA Zandvoort?",
          options: [
            "Autoluw maken met hogere parkeertarieven en meer ruimte voor fiets en groen, ook als plekken verdwijnen.",
            "Meer parkeercapaciteit aanleggen en doorstroming maximaliseren, met zo min mogelijk nieuwe beperkingen.",
            "Wijkgericht monitoren, knelpunten oplossen en mixen: parkeren, fietsvoorzieningen en veilige 30 km-routes."
          ],
          correctIndex: 2,
          explanation: "CDA wil wijkgericht bijsturen, investeren in (ondergronds) parkeren waar nodig, én fiets/OV beter organiseren."
        },
        {
          theme: "3. Financieel gezond",
          question: "Zandvoort wil ambitie én stabiliteit. Wat betekent ‘financieel gezond’ volgens CDA Zandvoort?",
          options: [
            "Belastingen laag houden en alleen uitvoeren wat direct kan, ook als projecten daardoor later starten.",
            "Sluitend begroten en doelgericht investeren via een agenda, zonder onnodig snijden in voorzieningen.",
            "Sterke reserve-opbouw door lasten te verhogen, zodat de gemeente grotere plannen sneller zelf kan betalen."
          ],
          correctIndex: 1,
          explanation: "CDA kiest voor een realistische meerjarenbegroting én investeren waar het dorp sterker van wordt."
        },
        {
          theme: "4. Participatie",
          question: "Veel mensen ervaren participatie als onduidelijk. Wat wil CDA Zandvoort verbeteren?",
          options: [
            "Participatie vooral digitaal organiseren met snelle peilingen, zodat besluiten efficiënt genomen worden.",
            "Inwonersraden meer beslissingsmacht geven en projecten pas starten als er brede instemming is bereikt.",
            "Vooraf heldere spelregels, duidelijke momenten en vaste terugkoppeling over wat wél en niet kan."
          ],
          correctIndex: 2,
          explanation: "CDA wil duidelijke spelregels en terugkoppeling om teleurstelling en wantrouwen te voorkomen."
        },
        {
          theme: "5. Economie",
          question: "Ondernemers zijn belangrijk voor banen en voorzieningen. Wat is de CDA-lijn?",
          options: [
            "Ondernemers ondersteunen met bereikbaarheid, minder gedoe en ruimte voor initiatieven die dorp en strand versterken.",
            "Vol inzetten op vrije vestiging en deregulering, zodat ondernemers vrijwel zonder gemeentelijke sturing kunnen groeien.",
            "Strenger sturen op toerisme en horeca om leefbaarheid te beschermen, ook als dat omzet en banen kan kosten."
          ],
          correctIndex: 0,
          explanation: "CDA ziet ondernemers als motor en wil een betrouwbaar bestuur met een ‘open mind’ voor initiatieven."
        },
        {
          theme: "6. Jongeren",
          question: "Jongeren verdienen perspectief in Zandvoort. Waar zet CDA Zandvoort op in?",
          options: [
            "Meer focus op studenten en young professionals van buitenaf om de lokale economie en huurmarkt te verbreden.",
            "Voorrang voor Zandvoortse jongeren, samen plannen maken en investeren in ontmoetingsplekken en stages.",
            "Extra geld naar cultuur en evenementen voor jongeren, terwijl wonen vooral via regionale afspraken loopt."
          ],
          correctIndex: 1,
          explanation: "CDA wil jongeren actief betrekken en perspectief bieden: wonen, jeugdhonk, stages en ontmoetingsplekken."
        },
        {
          theme: "7. Toerisme – strand & dorp",
          question: "Zandvoort heeft toerisme nodig, maar leefbaarheid telt ook. Wat is ‘beter toerisme’ volgens CDA?",
          options: [
            "Beperken van dagjesmensen met hogere heffingen en harde caps, zodat de drukte structureel omlaag gaat.",
            "Kwalitatief en gespreid toerisme met jaarrond aanbod, plus een dorpscentrum en publieke ruimte die klopt.",
            "Maximaal inzetten op groei en marketing, zodat bezoekersaantallen stijgen en inkomsten voorspelbaar worden."
          ],
          correctIndex: 1,
          explanation: "CDA kiest voor balans: jaarrond kwaliteit en spreiding, met aandacht voor strand én dorpscentrum."
        },
        {
          theme: "8. Milieu & natuur",
          question: "Zandvoort ligt tussen zee en natuurgebieden. Wat is de CDA-aanpak?",
          options: [
            "Ruimte geven aan bouwen en bedrijven, en milieumaatregelen vooral regionaal oppakken om kosten te beperken.",
            "Verdichten en herontwikkelen vóór bouwen in het groen, met beter groenbeheer en sterker afval- en zwerfvuilbeleid.",
            "Zwaarder inzetten op autoluw, strengere normen en minder bouwen, zodat natuur en klimaat altijd leidend zijn."
          ],
          correctIndex: 1,
          explanation: "CDA wil natuur koesteren, wijken vergroenen en afval/zwerfvuil beter aanpakken, met bouwen in balans."
        },
        {
          theme: "9. Meedoen & sociale zekerheid",
          question: "Niet iedereen kan vanzelf meekomen. Wat betekent ‘meedoen’ voor CDA Zandvoort?",
          options: [
            "Hulp vooral digitaal en efficiënter organiseren, met strakkere voorwaarden zodat ondersteuning doelgerichter wordt.",
            "Inkomenssteun verruimen en meer collectieve voorzieningen financieren, ook als dat extra gemeentelijke lasten vraagt.",
            "Menselijke maat en persoonlijk contact, met vasthouden aan 130% minimabeleid en laagdrempelige hulp."
          ],
          correctIndex: 2,
          explanation: "CDA staat voor bestaanszekerheid, persoonlijke benadering en een gemeente die naast mensen blijft staan."
        },
        {
          theme: "10. Leefbaarheid & veiligheid",
          question: "Overlast en vandalisme raken het dorpsgevoel. Waar zet CDA Zandvoort op in?",
          options: [
            "Meer preventie via jeugdwerk en buurtprojecten, en minder repressie om polarisatie en boetes te voorkomen.",
            "Zichtbare handhaving en snelle opvolging van meldingen, met duidelijke regels rond vuurwerk en overlast.",
            "Handhaving vooral inzetten op verkeer en parkeren, en overige overlast vooral via meldapps afhandelen."
          ],
          correctIndex: 1,
          explanation: "CDA wil dat inwoners zich veilig voelen: zichtbaar handhaven en beter opvolgen van meldingen."
        },
        {
          theme: "11. Onderwijs & sport",
          question: "Onderwijs en sport verbinden het dorp. Wat is de CDA-visie?",
          options: [
            "Meer marktwerking en eigen inkomsten bij verenigingen stimuleren, zodat de gemeente minder hoeft bij te dragen.",
            "Meer geld naar cultuur en welzijn, en sport vooral regionaal organiseren om dubbel onderhoud te voorkomen.",
            "Structureel samenwerken met scholen en verenigingen, investeren in accommodaties en aanpak van achterstanden."
          ],
          correctIndex: 2,
          explanation: "CDA ziet onderwijs als basis en sport als gemeenschap: samenwerking, steun en gezonde wijken."
        },
        {
          theme: "12. Bestuurlijke samenwerking",
          question: "Zandvoort werkt samen in een gezamenlijke organisatie. Wat wil CDA Zandvoort daarbij borgen?",
          options: [
            "Samenwerking minimaliseren en meer zelf doen, ook als dat extra capaciteit en hogere gemeentelijke uitgaven vraagt.",
            "Samenwerken waar nodig, maar met een sterk kernteam dat Zandvoortse projecten en dienstverlening bewaakt.",
            "Verder centraliseren om kosten te besparen, met meer taken buiten Zandvoort en één loket voor de hele regio."
          ],
          correctIndex: 1,
          explanation: "CDA wil Zandvoort zelfstandig houden in identiteit en keuzes, met voldoende capaciteit en focus op Zandvoortse projecten."
        }
      ];

      var themeSummaries = {
        "1. Wonen": { title:"Wonen – Zandvoorters moeten Zandvoorters kunnen blijven", text:"Betaalbaar bouwen, minimaal 50% toewijzen aan Zandvoorters, sturen op zelfbewoning/antispeculatie en woningonttrekking tegengaan." },
        "2. Verkeer & bereikbaarheid": { title:"Verkeer & bereikbaarheid – slim en wijkgericht", text:"Jaarlijks monitoren per wijk, knelpunten aanpakken, (ondergronds/halfgroen) parkeren waar nodig, beter fietsparkeren en OV/doorstroming." },
        "3. Financieel gezond": { title:"Financieel gezond – ambitie én stabiliteit", text:"Realistische meerjarenbegroting en sturen via Strategische Investeringsagenda, zonder onnodig afschalen van ambities." },
        "4. Participatie": { title:"Participatie – duidelijkheid en terugkoppeling", text:"Vooraf helder: waarover, wanneer en wat er met inbreng gebeurt. Laagdrempelig en samen met inwoners/ondernemers." },
        "5. Economie": { title:"Economie – ondernemers als motor", text:"Betrouwbaar bestuur, vlotte ondersteuning en ruimte voor initiatieven. Jaarrond economie versterken (ook buiten piekseizoen)." },
        "6. Jongeren": { title:"Jongeren – perspectief in eigen dorp", text:"Woonkansen voor jongeren, jeugdhonk, stage/werk stimuleren, ontmoetingsplekken en mét jongeren plannen ontwikkelen." },
        "7. Toerisme – strand & dorp": { title:"Toerisme – beter, jaarrond en in balans", text:"Kwalitatief, gespreid en jaarrond aanbod (meer indoor/laagseizoen), met aandacht voor dorpscentrum en openbare ruimte." },
        "8. Milieu & natuur": { title:"Milieu & natuur – groene oase koesteren", text:"Groenbeheer omhoog, zwerfvuil/afvalbeleid verbeteren (vervuiler betaalt), verdichting boven bouwen in het groen." },
        "9. Meedoen & sociale zekerheid": { title:"Meedoen – bestaanszekerheid en menselijke maat", text:"Persoonlijk contact blijft belangrijk, 130% minimabeleid vasthouden, laagdrempelige hulp en omzien naar elkaar in wijken." },
        "10. Leefbaarheid & veiligheid": { title:"Leefbaarheid & veiligheid – zichtbaar en daadkrachtig", text:"Handhaven op overlast/vandalisme/vuurwerk en gevaarlijk rijgedrag, sneller meldingen oppakken, vaste basis in Zandvoort." },
        "11. Onderwijs & sport": { title:"Onderwijs & sport – basis en verbinding", text:"Samenwerken met scholen, achterstanden aanpakken en verenigingen steunen. Sportvoorzieningen onderhouden/verduurzamen en gezonde wijken." },
        "12. Bestuurlijke samenwerking": { title:"Bestuurlijke samenwerking – Zandvoort blijft Zandvoort", text:"Samenwerken waar nodig, maar met een sterk gebiedsteam/kernteam voor Zandvoortse projecten en betere dienstverlening." }
      };

      // Fisher–Yates shuffle
      function shuffleArray(arr){
        for (var i = arr.length - 1; i > 0; i--){
          var j = Math.floor(Math.random() * (i + 1));
          var tmp = arr[i];
          arr[i] = arr[j];
          arr[j] = tmp;
        }
        return arr;
      }

      // Bouw quiz met geshuffelde opties (correctIndex blijft correct)
      function buildShuffledQuiz(){
        var cloned = baseQuestions.map(function(q){
          return {
            theme: q.theme,
            question: q.question,
            options: q.options.slice(),
            correctIndex: q.correctIndex,
            explanation: q.explanation
          };
        });

        cloned.forEach(function(q){
          var packed = q.options.map(function(text, idx){
            return { text:text, isCorrect: idx === q.correctIndex };
          });

          shuffleArray(packed);

          q.options = packed.map(function(p){ return p.text; });
          q.correctIndex = packed.findIndex(function(p){ return p.isCorrect; });
        });

        return cloned;
      }

      // Elements
      var totalQuestionsEl = $("totalQuestions");
      var questionNumberEl = $("questionNumber");
      var progressFillEl = $("progressFill");
      var progressLabelEl = $("progressLabel");
      var themeNameEl = $("themeName");
      var questionTextEl = $("questionText");
      var optionsListEl = $("optionsList");
      var explanationBoxEl = $("explanationBox");
      var scoreTextEl = $("scoreText");
      var nextBtn = $("nextBtn");
      var restartBtn = $("restartBtn");
      var resultsBannerEl = $("resultsBanner");
      var themeChipsEl = $("themeChips");
      var themeDetailsEl = $("themeDetails");

      var quizQuestions = [];
      var currentQuestionIndex = 0;
      var score = 0;
      var answeredCurrent = false;

      function initQuiz(){
        quizQuestions = buildShuffledQuiz();

        totalQuestionsEl.textContent = quizQuestions.length;
        currentQuestionIndex = 0;
        score = 0;
        answeredCurrent = false;

        resultsBannerEl.style.display = "none";
        nextBtn.disabled = true;
        nextBtn.textContent = "Volgende vraag →";

        loadQuestion();
        updateProgress();
        updateScore();
      }

      function loadQuestion(){
        var q = quizQuestions[currentQuestionIndex];

        questionNumberEl.textContent = (currentQuestionIndex + 1);
        themeNameEl.textContent = q.theme;
        questionTextEl.textContent = q.question;

        explanationBoxEl.style.display = "none";
        explanationBoxEl.textContent = "";
        optionsListEl.innerHTML = "";

        answeredCurrent = false;
        nextBtn.disabled = true;

        q.options.forEach(function(opt, index){
          var li = document.createElement("li");

          var btn = document.createElement("button");
          btn.type = "button";
          btn.className = "option";
          btn.setAttribute("aria-label", "Antwoord " + String.fromCharCode(65+index) + ": " + opt);

          var label = document.createElement("span");
          label.className = "option-label";
          label.textContent = String.fromCharCode(65 + index);

          var text = document.createElement("span");
          text.className = "option-text";
          text.textContent = opt;

          btn.appendChild(label);
          btn.appendChild(text);

          btn.addEventListener("click", function(){
            handleOptionClick(index);
          });

          li.appendChild(btn);
          optionsListEl.appendChild(li);
        });
      }

      function handleOptionClick(optionIndex){
        if(answeredCurrent) return;

        var q = quizQuestions[currentQuestionIndex];
        var isCorrect = (optionIndex === q.correctIndex);

        var optionButtons = optionsListEl.querySelectorAll(".option");
        optionButtons.forEach(function(btn, idx){
          btn.classList.add("disabled");
          if(idx === q.correctIndex) btn.classList.add("correct");
          if(idx === optionIndex && !isCorrect) btn.classList.add("incorrect");
        });

        if(isCorrect){
          score++;
          updateScore();
        }

        explanationBoxEl.style.display = "block";
        explanationBoxEl.innerHTML =
          "<strong>" + (isCorrect ? "Goed!" : "Bijna…") + "</strong> " + q.explanation;

        answeredCurrent = true;
        nextBtn.disabled = false;

        if(currentQuestionIndex === quizQuestions.length - 1){
          nextBtn.textContent = "Bekijk jouw dorpsprofiel";
        } else {
          nextBtn.textContent = "Volgende vraag →";
        }
      }

      function updateScore(){
        scoreTextEl.textContent = score + " goede antwoord" + (score === 1 ? "" : "en");
      }

      function updateProgress(){
        var progress = (currentQuestionIndex / quizQuestions.length) * 100;
        progressFillEl.style.width = progress + "%";
        progressLabelEl.textContent = Math.round(progress) + "%";
      }

      function showResults(){
        var total = quizQuestions.length;
        var percentage = Math.round((score / total) * 100);
        var message;

        if(percentage >= 80){
          message = "Je herkent onze koers goed: verantwoordelijkheid, solidariteit en rentmeesterschap – dichtbij en dorps.";
        } else if(percentage >= 50){
          message = "Mooi begin! Je deelt al veel waarden met CDA Zandvoort. Praat mee en denk mee.";
        } else {
          message = "Interessant! We gaan graag in gesprek over wat jij belangrijk vindt voor Zandvoort.";
        }

        resultsBannerEl.style.display = "block";
        resultsBannerEl.innerHTML =
          "<strong>Jouw dorpsprofiel:</strong> " + score + " van " + total + " goed (" + percentage + "%). " + message;
      }

      nextBtn.addEventListener("click", function(){
        if(!answeredCurrent) return;

        if(currentQuestionIndex < quizQuestions.length - 1){
          currentQuestionIndex++;
          loadQuestion();
          updateProgress();
        } else {
          updateProgress();
          showResults();
          nextBtn.disabled = true;
        }
      });

      restartBtn.addEventListener("click", function(){
        initQuiz();
        updateThemeDetails(baseQuestions[0].theme);
        setActiveChip(baseQuestions[0].theme);
      });

      function initThemeChips(){
        var themes = baseQuestions.map(function(q){ return q.theme; });

        themeChipsEl.innerHTML = "";
        themes.forEach(function(theme, i){
          var chip = document.createElement("button");
          chip.type = "button";
          chip.className = "chip" + (i === 0 ? " active" : "");
          chip.dataset.theme = theme;

          var dot = document.createElement("span");
          dot.className = "chip-dot";

          var label = document.createElement("span");
          label.textContent = theme;

          chip.appendChild(dot);
          chip.appendChild(label);

          chip.addEventListener("click", function(){
            setActiveChip(theme);
            updateThemeDetails(theme);
          });

          themeChipsEl.appendChild(chip);
        });

        updateThemeDetails(themes[0]);
      }

      function setActiveChip(theme){
        var chips = themeChipsEl.querySelectorAll(".chip");
        chips.forEach(function(chip){
          chip.classList.toggle("active", chip.dataset.theme === theme);
        });
      }

      function updateThemeDetails(theme){
        var info = themeSummaries[theme];
        if(!info){
          themeDetailsEl.innerHTML = "<h3>" + theme + "</h3><p>Geen samenvatting beschikbaar.</p>";
          return;
        }
        themeDetailsEl.innerHTML = "<h3>" + info.title + "</h3><p>" + info.text + "</p>";
      }

      // Start
      initThemeChips();
      initQuiz();
    })();
  </script>
</body>
</html>

