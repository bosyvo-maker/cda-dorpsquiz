<div id="cda-dorpsquiz">
  <style>
    :root {
      --cda-green: #007b5e;
      --cda-green-dark: #005844;
      --cda-sand: #f2d7a0; /* warm zandkleur Zandvoort */
      --cda-blue: #0077b6;
      --cda-red: #e63946;
      --radius-lg: 18px;
      --shadow-soft: 0 14px 30px rgba(0, 0, 0, 0.12);
    }

    #cda-dorpsquiz * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    #cda-dorpsquiz {
      min-height: 100vh;
      background: radial-gradient(circle at top, #f2d7a0 0, #ffffff 40%, #b7e3ff 100%);
      padding: 12px 16px 24px;
    }

    #cda-dorpsquiz .app {
      width: 100%;
      max-width: 980px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.96);
      border: 3px solid #f2d7a0; /* subtiele zandkleur rand */
      border-radius: 24px;
      box-shadow: var(--shadow-soft);
      overflow: hidden;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(260px, 2fr);
      gap: 0;
    }

    @media (max-width: 820px) {
      #cda-dorpsquiz .app {
        grid-template-columns: 1fr;
        border-radius: 16px;
      }
    }

    @media (max-width: 600px) {
      #cda-dorpsquiz {
        padding: 8px;
      }

      #cda-dorpsquiz .app {
        border-radius: 0;
        border-left: none;
        border-right: none;
        box-shadow: none;
        max-width: 100%;
      }
    }

    #cda-dorpsquiz header {
      grid-column: 1 / -1;
      padding: 22px 26px 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    @media (max-width: 600px) {
      #cda-dorpsquiz header {
        padding: 14px 14px 6px;
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
    }

    #cda-dorpsquiz .brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    #cda-dorpsquiz .brand-logo {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffffff 0, var(--cda-green) 55%, var(--cda-green-dark) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 900;
      font-size: 28px;
      box-shadow: 0 4px 14px rgba(0,0,0,0.25);
    }

    #cda-dorpsquiz .brand-text h1 {
      font-size: 20px;
      color: #12302a;
      margin-bottom: 2px;
    }

    #cda-dorpsquiz .brand-text p {
      font-size: 13px;
      color: #4b635d;
    }

    @media (max-width: 600px) {
      #cda-dorpsquiz .brand-text h1 {
        font-size: 18px;
      }
      #cda-dorpsquiz .brand-text p {
        font-size: 12px;
      }
    }

    #cda-dorpsquiz .badge-election {
      padding: 6px 12px;
      border-radius: 999px;
      background: var(--cda-green);
      color: #fff;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    #cda-dorpsquiz .badge-dot {
      width: 7px;
      height: 7px;
      border-radius: 50%;
      background: #3cffb3;
    }

    #cda-dorpsquiz main {
      display: contents;
    }

    #cda-dorpsquiz .quiz-panel {
      padding: 20px 26px 24px;
      border-right: 1px solid rgba(0, 0, 0, 0.05);
    }

    @media (max-width: 820px) {
      #cda-dorpsquiz .quiz-panel {
        border-right: none;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        padding: 14px 14px 18px;
      }
    }

    #cda-dorpsquiz .intro {
      margin-bottom: 18px;
    }

    #cda-dorpsquiz .intro-title {
      font-size: 22px;
      margin-bottom: 6px;
      color: #102620;
    }

    #cda-dorpsquiz .intro-subtitle {
      font-size: 14px;
      color: #5b706b;
    }

    #cda-dorpsquiz .intro-subtitle strong {
      color: var(--cda-green-dark);
    }

    @media (max-width: 600px) {
      #cda-dorpsquiz .intro-title {
        font-size: 19px;
      }
      #cda-dorpsquiz .intro-subtitle {
        font-size: 13px;
      }
    }

    #cda-dorpsquiz .progress-bar-wrapper {
      margin: 18px 0 16px;
    }

    #cda-dorpsquiz .progress-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 12px;
      color: #6b7f79;
      margin-bottom: 6px;
    }

    #cda-dorpsquiz .progress-track {
      position: relative;
      width: 100%;
      height: 9px;
      border-radius: 999px;
      background: #edf2f7;
      overflow: hidden;
    }

    #cda-dorpsquiz .progress-fill {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      width: 0%;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--cda-green), var(--cda-blue));
      transition: width 0.35s ease;
    }

    #cda-dorpsquiz .question-card {
      background: #ffffff;
      border-radius: var(--radius-lg);
      border: 1px solid rgba(0, 0, 0, 0.04);
      padding: 18px 18px 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.04);
    }

    #cda-dorpsquiz .question-theme-tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      background: rgba(0, 123, 94, 0.07);
      color: #205144;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 10px;
    }

    #cda-dorpsquiz .question-theme-tag span {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffffff 0, var(--cda-green) 60%);
    }

    #cda-dorpsquiz .question-text {
      font-size: 17px;
      line-height: 1.4;
      color: #10211c;
      margin-bottom: 14px;
    }

    @media (max-width: 600px) {
      #cda-dorpsquiz .question-text {
        font-size: 16px;
      }
    }

    #cda-dorpsquiz .options-list {
      list-style: none;
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 12px;
    }

    #cda-dorpsquiz .option {
      position: relative;
      border-radius: 999px;
      border: 1px solid #d0dde0;
      padding: 10px 14px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 10px;
      background: #ffffff;
      cursor: pointer;
      transition: border-color 0.18s ease, box-shadow 0.18s ease, transform 0.05s ease, background 0.2s ease;
    }

    #cda-dorpsquiz .option:hover {
      border-color: var(--cda-green);
      box-shadow: 0 0 0 1px rgba(0, 123, 94, 0.16);
      transform: translateY(-1px);
    }

    #cda-dorpsquiz .option.disabled {
      cursor: default;
      opacity: 0.83;
      transform: none;
      box-shadow: none;
    }

    #cda-dorpsquiz .option-label {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      border: 2px solid #c7d3d8;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 700;
      flex-shrink: 0;
      background: #f8fbfc;
    }

    #cda-dorpsquiz .option-text {
      flex: 1;
      color: #12302a;
    }

    #cda-dorpsquiz .option.correct {
      border-color: var(--cda-green);
      background: linear-gradient(90deg, rgba(0, 123, 94, 0.08), rgba(255, 255, 255, 0.95));
    }

    #cda-dorpsquiz .option.incorrect {
      border-color: var(--cda-red);
      background: linear-gradient(90deg, rgba(230, 57, 70, 0.08), rgba(255, 255, 255, 0.95));
    }

    #cda-dorpsquiz .option.correct .option-label {
      border-color: var(--cda-green);
      background: var(--cda-green);
      color: #fff;
    }

    #cda-dorpsquiz .option.incorrect .option-label {
      border-color: var(--cda-red);
      background: var(--cda-red);
      color: #fff;
    }

    #cda-dorpsquiz .explanation {
      font-size: 13px;
      color: #4e5f5a;
      padding: 10px 12px;
      border-radius: 12px;
      background: #f3faf7;
      border: 1px dashed rgba(0, 123, 94, 0.25);
      margin-bottom: 10px;
      display: none;
    }

    #cda-dorpsquiz .explanation strong {
      color: var(--cda-green-dark);
    }

    #cda-dorpsquiz .quiz-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-top: 6px;
    }

    #cda-dorpsquiz .score-pill {
      font-size: 12px;
      color: #546663;
      background: #edf2f7;
      border-radius: 999px;
      padding: 6px 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    #cda-dorpsquiz .score-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--cda-green);
    }

    #cda-dorpsquiz button {
      border: none;
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: transform 0.08s ease, box-shadow 0.12s ease, filter 0.12s ease;
    }

    #cda-dorpsquiz button:active {
      transform: translateY(1px) scale(0.99);
      box-shadow: none;
      filter: brightness(0.96);
    }

    #cda-dorpsquiz .btn-primary {
      background: linear-gradient(135deg, var(--cda-green), var(--cda-green-dark));
      color: #ffffff;
      box-shadow: 0 10px 20px rgba(0, 123, 94, 0.25);
    }

    #cda-dorpsquiz .btn-secondary {
      background: #ffffff;
      color: #35524b;
      border: 1px solid #c5d1cf;
    }

    #cda-dorpsquiz .btn-primary[disabled],
    #cda-dorpsquiz .btn-secondary[disabled] {
      opacity: 0.55;
      cursor: default;
      box-shadow: none;
    }

    @media (max-width: 600px) {
      #cda-dorpsquiz .quiz-footer {
        flex-direction: column-reverse;
        align-items: stretch;
      }

      #cda-dorpsquiz .quiz-footer > div:last-child {
        width: 100%;
        justify-content: space-between;
      }

      #cda-dorpsquiz .btn-primary,
      #cda-dorpsquiz .btn-secondary {
        flex: 1 1 auto;
        justify-content: center;
      }
    }

    #cda-dorpsquiz .results-banner {
      margin-top: 12px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(0, 0, 0, 0.06);
      background: linear-gradient(130deg, rgba(0, 123, 94, 0.1), rgba(0, 119, 182, 0.05));
      display: none;
    }

    #cda-dorpsquiz .results-banner strong {
      color: var(--cda-green-dark);
    }

    #cda-dorpsquiz .side-panel {
      padding: 22px 22px 22px 18px;
      background: radial-gradient(circle at top left, #fdf8ec 0, #f7f0df 40%, #f9f9ff 100%);
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    @media (max-width: 820px) {
      #cda-dorpsquiz .side-panel {
        padding: 14px;
      }
    }

    #cda-dorpsquiz .side-header {
      font-size: 15px;
      font-weight: 700;
      color: #15352e;
      margin-bottom: 2px;
    }

    #cda-dorpsquiz .side-sub {
      font-size: 13px;
      color: #5f6b65;
      margin-bottom: 8px;
    }

    #cda-dorpsquiz .theme-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 6px;
    }

    #cda-dorpsquiz .chip {
      font-size: 11px;
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.78);
      border: 1px solid rgba(0, 0, 0, 0.06);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: background 0.15s ease, border-color 0.15s ease, transform 0.05s ease;
    }

    #cda-dorpsquiz .chip-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--cda-green);
    }

    #cda-dorpsquiz .chip.active {
      background: #ffffff;
      border-color: var(--cda-green);
      transform: translateY(-1px);
    }

    #cda-dorpsquiz .theme-details {
      background: rgba(255, 255, 255, 0.94);
      border-radius: 16px;
      padding: 12px 13px;
      border: 1px solid rgba(0, 0, 0, 0.04);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.04);
      min-height: 120px;
    }

    #cda-dorpsquiz .theme-details h3 {
      font-size: 14px;
      margin-bottom: 4px;
      color: #163029;
    }

    #cda-dorpsquiz .theme-details p {
      font-size: 13px;
      color: #4a5a55;
      line-height: 1.4;
    }

    #cda-dorpsquiz .cta-card {
      margin-top: 8px;
      border-radius: 16px;
      padding: 10px 13px 11px;
      background: linear-gradient(120deg, rgba(0, 123, 94, 0.12), rgba(0, 119, 182, 0.18));
      border: 1px solid rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
    }

    #cda-dorpsquiz .cta-card strong {
      display: block;
      font-size: 14px;
      color: #0f2721;
      margin-bottom: 4px;
    }

    #cda-dorpsquiz .cta-card p {
      font-size: 12px;
      color: #12302a;
      margin-bottom: 8px;
    }

    #cda-dorpsquiz .cta-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    #cda-dorpsquiz .pill-small {
      font-size: 11px;
      padding: 5px 9px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.85);
      color: #26413b;
      border: 1px solid rgba(0, 0, 0, 0.04);
    }

    #cda-dorpsquiz .pill-small strong {
      font-weight: 700;
      color: var(--cda-green-dark);
    }
    
    #cda-dorpsquiz .pill-small {
    text-align: center;
    line-height: 1.25;
    
    }

    #cda-dorpsquiz .share-text {
      font-size: 11px;
      margin-top: 6px;
      color: #435450;
    }

    #cda-dorpsquiz .share-text code {
      background: rgba(255, 255, 255, 0.8);
      padding: 3px 6px;
      border-radius: 999px;
      font-size: 11px;
    }
  </style>

  <div class="app" role="application" aria-label="Bewustwordingsspel CDA Zandvoort">
    <header>
      <div class="brand">
        <div class="brand-logo" aria-hidden="true">CDA</div>
        <div class="brand-text">
          <h1>CDA Zandvoort – Dorpsquiz</h1>
          <p>Ontdek in 3 minuten of jij ook een <strong>Zandvoorter voor Zandvoorters</strong> bent.</p>
        </div>
      </div>
      <div class="badge-election">
        <span class="badge-dot"></span>
        Gemeenteraadsverkiezingen – Stem Dorpspartij CDA
      </div>
    </header>

    <main>
      <section class="quiz-panel">
        <div class="intro">
          <h2 class="intro-title">
            Vraag <span id="questionNumber">1</span> van <span id="totalQuestions">0</span>
          </h2>
          <p class="intro-subtitle">
            Maak keuzes over wonen, verkeer, jongeren en meer. Na elke vraag leggen we kort uit wat
            <strong>CDA Zandvoort</strong> wil.
          </p>
        </div>

        <div class="progress-bar-wrapper">
          <div class="progress-header">
            <span>Voortgang</span>
            <span id="progressLabel">0%</span>
          </div>
          <div class="progress-track">
            <div class="progress-fill" id="progressFill"></div>
          </div>
        </div>

        <article class="question-card">
          <div class="question-theme-tag">
            <span></span>
            <span id="themeName">Thema</span>
          </div>
          <p class="question-text" id="questionText">Vraagtekst…</p>

          <ul class="options-list" id="optionsList"></ul>

          <div class="explanation" id="explanationBox"></div>

          <div class="quiz-footer">
            <div class="score-pill">
              <span class="score-dot"></span>
              <span id="scoreText">0 goede antwoorden</span>
            </div>
            <div style="display:flex; gap:6px;">
              <button type="button" class="btn-secondary" id="restartBtn">Opnieuw spelen</button>
              <button type="button" class="btn-primary" id="nextBtn" disabled>
                Volgende vraag
                <span aria-hidden="true">→</span>
              </button>
            </div>
          </div>

          <div class="results-banner" id="resultsBanner"></div>
        </article>
      </section>

      <aside class="side-panel" aria-label="Thema's CDA Zandvoort">
        <div>
          <p class="side-header">Waar staat onze dorpspartij voor?</p>
          <p class="side-sub">Klik op een thema en zie wat CDA Zandvoort de komende jaren wil bereiken.</p>
        </div>

        <div class="theme-chips" id="themeChips"></div>

        <div class="theme-details" id="themeDetails">
          <h3>Wonen – Zandvoorters moeten Zandvoorters kunnen blijven</h3>
          <p>
            Meer betaalbare woningen, flexwoningen voor jongeren en passende woningen voor senioren zodat
            doorstroming op gang komt – in Zandvoort zelf.
          </p>
        </div>

        <div class="cta-card">
          <strong>Past dit bij jouw ideeën voor Zandvoort?</strong>
          <p>
            Dan hoor je bij ons: de dorpspartij die luistert, doorpakt en Zandvoort samen met jou verder bouwt.
          </p>
          <div class="cta-actions">
            <button type="button" class="btn-primary"
              onclick="alert('Bedankt! Vertel een dorpsgenoot waarom jij CDA Zandvoort steunt.');">
              Ik stem CDA Zandvoort
            </button>
            <span class="pill-small">
		Van en<br><strong>voor Zandvoorters</strong>
	</span>
          </div>
          <p class="share-text">
            Tip: deel na het spelen met een buur of vriend:
            <code>"Ik deed de CDA dorpsquiz – dit is mijn Zandvoort!"</code>
          </p>
        </div>
      </aside>
    </main>
  </div>

  <script>
    (function () {
      function startQuiz() {
        var root = document.getElementById("cda-dorpsquiz");
        if (!root) return;

        var quizQuestions = [
          {
            theme: "Wonen",
            question:
              "Steeds meer jongeren en gescheiden gezinnen moeten Zandvoort verlaten omdat er geen betaalbare woning is. Wat wil CDA Zandvoort?",
            options: [
              "Vooral dure koopappartementen bouwen voor investeerders",
              "Doorbouwen met veel sociale en betaalbare woningen, flexwoningen voor jongeren en betere ouderenhuisvesting voor doorstroming",
              "Minder bouwen zodat het dorp niet verandert"
            ],
            correctIndex: 1,
            explanation:
              "CDA Zandvoort wil flink doorbouwen met nadruk op betaalbare huur- en koopwoningen, flexwoningen voor jongeren en passende woningen voor senioren zodat Zandvoorters in Zandvoort kunnen blijven wonen."
          },
          {
            theme: "Vervoer & bereikbaarheid",
            question:
              "In sommige buurten is nog steeds veel parkeerdruk. Wat is de aanpak van CDA Zandvoort?",
            options: [
              "Alle parkeertarieven afschaffen zodat iedereen overal kan staan",
              "Meer ondergronds parkeren, betere parkeer-app, slimme tarieven per wijk en goede alternatieven zoals E-busjes",
              "Alle auto’s uit het dorp weren"
            ],
            correctIndex: 1,
            explanation:
              "Het CDA wil het parkeerbeleid verbeteren door meer ondergronds parkeren, slimmer tariefgebruik, goede bereikbaarheid voor bewoners en bezoekers én een dorpsshuttle met E-busjes."
          },
          {
            theme: "Financieel gezond",
            question:
              "Zandvoort staat er financieel goed voor. Wat betekent dit voor de komende jaren volgens het CDA?",
            options: [
              "Zo veel mogelijk oppotten en weinig investeren in het dorp",
              "Realistisch en sluitend begroten, maar wel blijven investeren in het dorp via een Strategische Investerings Agenda",
              "De OZB fors verhogen om extra reserves op te bouwen"
            ],
            correctIndex: 1,
            explanation:
              "CDA Zandvoort wil een gezonde meerjarenbegroting combineren met investeren in wonen en leefomgeving, zonder onnodig hoge belastingdruk."
          },
          {
            theme: "Participatie",
            question:
              "Participatie levert soms frustratie op bij inwoners. Wat wil CDA Zandvoort verbeteren?",
            options: [
              "Minder participatie, dan is het sneller klaar",
              "Duidelijk vooraf zeggen waarover inwoners mogen meepraten en steeds terugkoppelen wat er met hun ideeën gebeurt",
              "Alleen participeren via ingewikkelde digitale formulieren"
            ],
            correctIndex: 1,
            explanation:
              "Het CDA wil laagdrempelige participatie, helder verwachtingsmanagement en goede terugkoppeling, zodat inwoners zien wat er met hun inbreng gebeurt."
          },
          {
            theme: "Economie & toerisme",
            question:
              "Hoe kijkt CDA Zandvoort naar ondernemers en toerisme?",
            options: [
              "Ondernemers vooral meer regels en hogere lasten geven",
              "Ondernemers de ruimte geven, jaarrond toerisme en nieuwe indoor-activiteiten stimuleren en meedenken in plaats van tegenwerken",
              "Alle toeristische activiteiten beperken tot de zomer"
            ],
            correctIndex: 1,
            explanation:
              "Ondernemers zijn de motor van de Zandvoortse economie. Het CDA wil een betrouwbaar bestuur, ruimte voor vernieuwing en een sterker jaarrond aanbod voor dorp en bezoekers."
          },
          {
            theme: "Jongeren",
            question:
              "Wat vindt CDA Zandvoort belangrijk voor jongeren in het dorp?",
            options: [
              "Weinig aandacht, jongeren vertrekken toch wel",
              "Een jongerenraad, goede stageplekken, fijne ontmoetingsplekken én voorrang bij woningen voor Zandvoortse jongeren",
              "Jongeren vooral naar andere gemeenten doorverwijzen"
            ],
            correctIndex: 1,
            explanation:
              "De jeugd heeft de toekomst. Het CDA wil jongeren actief betrekken bij besluiten, zorgen voor woningen, stageplekken en aantrekkelijke plekken om elkaar te ontmoeten."
          },
          {
            theme: "Natuur & milieu",
            question:
              "Zandvoort is een groene oase. Wat is een speerpunt van CDA Zandvoort?",
            options: [
              "Minder groen en meer steen zodat onderhoud goedkoper wordt",
              "Bewoners betrekken met plantsoen-adoptie, beter afvalbeheer en duurzame nieuwbouw",
              "De natuur alleen beschermen in de duinen, niet in het dorp"
            ],
            correctIndex: 1,
            explanation:
              "Het CDA wil Zandvoort groen houden door bewoners te betrekken bij plantsoenen, zwerfvuil aan te pakken en bouwprojecten klimaatvriendelijk te maken."
          },
          {
            theme: "Meedoen & sociale zekerheid",
            question:
              "Wat betekent ‘meedoen’ voor CDA Zandvoort?",
            options: [
              "Iedereen moet het zelf maar uitzoeken",
              "Zorg voor bestaanszekerheid, oog voor stille armoede en een menselijke benadering in het sociaal domein",
              "Alle ondersteuning volledig digitaliseren zonder persoonlijk contact"
            ],
            correctIndex: 1,
            explanation:
              "Het CDA staat voor een sterke sociale basis: persoonlijke aandacht, bestaanszekerheid en ondersteuning voor wie dat nodig heeft."
          },
          {
            theme: "Samenleving & veiligheid",
            question:
              "Wat wil CDA Zandvoort rond veiligheid in het dorp?",
            options: [
              "Minder handhaving om geld te besparen",
              "Zichtbare en daadkrachtige handhaving tegen overlast, vandalisme en vuurwerk, met een vaste basis in Zandvoort zelf",
              "Alleen reageren op meldingen van toeristen"
            ],
            correctIndex: 1,
            explanation:
              "Veiligheid en respectvol samenleven horen bij een hechte dorpsgemeenschap. Het CDA wil dat handhaving zichtbaar aanwezig en goed bereikbaar is."
          },
          {
            theme: "Onderwijs & sport",
            question:
              "Hoe verbindt CDA Zandvoort onderwijs en sport met het dorp?",
            options: [
              "Scholen en verenigingen zoveel mogelijk aan hun lot overlaten",
              "Samenwerking met scholen, sportclubs en ondernemers versterken, sport inzetten voor gezondheid en jaarrond evenementen organiseren",
              "Alle sportfaciliteiten privatiseren"
            ],
            correctIndex: 1,
            explanation:
              "Het CDA wil goed onderwijs, sterke sportverenigingen en sport inzetten voor gezondheid, ontmoeting én jaarrond activiteiten in Zandvoort."
          }
        ];

        var themeSummaries = {
          "Wonen": {
            title: "Wonen – Zandvoorters moeten Zandvoorters kunnen blijven",
            text:
              "Meer betaalbare huur- en koopwoningen, flexwoningen voor jongeren en passende ouderenwoningen zodat de doorstroming op gang komt in Zandvoort zelf."
          },
          "Vervoer & bereikbaarheid": {
            title: "Vervoer – Slim parkeren en goed bereikbaar",
            text:
              "Optimaliseren van het parkeerbeleid met meer ondergronds parkeren, slimme tarieven per wijk en goede alternatieven zoals E-busjes vanuit de wijken."
          },
          "Financieel gezond": {
            title: "Financieel gezond – Investeren in ons dorp",
            text:
              "Een realistische, sluitende begroting, gezonde reserves én blijven investeren in wonen, leefomgeving en voorzieningen via een Strategische Investerings Agenda."
          },
          "Participatie": {
            title: "Participatie – Samen keuzes maken",
            text:
              "Heldere spelregels: vooraf weten waarover je mag meepraten en altijd terugkoppeling krijgen wat er met de inbreng van inwoners en ondernemers gebeurt."
          },
          "Economie & toerisme": {
            title: "Economie & toerisme – Jaarrond levendig",
            text:
              "Ondernemers de ruimte geven, nieuwe initiatieven omarmen en werken aan een sterk jaarrond aanbod voor zowel inwoners als bezoekers."
          },
          "Jongeren": {
            title: "Jongeren – De toekomst van Zandvoort",
            text:
              "Een jongerenraad, ontmoetingsplekken, goede stageplaatsen en woningen voor Zandvoortse jongeren zodat zij in hun eigen dorp kunnen blijven."
          },
          "Natuur & milieu": {
            title: "Natuur & milieu – Groene oase in de Randstad",
            text:
              "Groen koesteren, samen wijken vergroenen, zwerfvuil aanpakken en duurzaam bouwen zodat Zandvoort leefbaar blijft voor de generaties na ons."
          },
          "Meedoen & sociale zekerheid": {
            title: "Meedoen – Niemand aan de kant",
            text:
              "Iedereen moet kunnen meedoen: met bestaanszekerheid, aandacht voor stille armoede en een menselijke maat in alle hulp en ondersteuning."
          },
          "Samenleving & veiligheid": {
            title: "Samenleving & veiligheid – Met respect samen leven",
            text:
              "Inwoners moeten zich veilig voelen. Dat vraagt om zichtbare handhaving tegen overlast en vandalisme en een vaste basis in Zandvoort."
          },
          "Onderwijs & sport": {
            title: "Onderwijs & sport – Een vitaal dorp",
            text:
              "Goed onderwijs en een sterk sportaanbod horen bij een gezonde dorpsgemeenschap, met aandacht voor talent, gezondheid en ontmoeting."
          }
        };

        // Element referenties
        var totalQuestionsEl = root.querySelector("#totalQuestions");
        var questionNumberEl = root.querySelector("#questionNumber");
        var progressFillEl = root.querySelector("#progressFill");
        var progressLabelEl = root.querySelector("#progressLabel");
        var themeNameEl = root.querySelector("#themeName");
        var questionTextEl = root.querySelector("#questionText");
        var optionsListEl = root.querySelector("#optionsList");
        var explanationBoxEl = root.querySelector("#explanationBox");
        var scoreTextEl = root.querySelector("#scoreText");
        var nextBtn = root.querySelector("#nextBtn");
        var restartBtn = root.querySelector("#restartBtn");
        var resultsBannerEl = root.querySelector("#resultsBanner");
        var themeChipsEl = root.querySelector("#themeChips");
        var themeDetailsEl = root.querySelector("#themeDetails");

        var currentQuestionIndex = 0;
        var score = 0;
        var answeredCurrent = false;

        function initQuiz() {
          totalQuestionsEl.textContent = quizQuestions.length;
          currentQuestionIndex = 0;
          score = 0;
          answeredCurrent = false;
          resultsBannerEl.style.display = "none";
          loadQuestion();
          updateProgress();
          updateScore();
          nextBtn.disabled = true;
        }

        function loadQuestion() {
          var q = quizQuestions[currentQuestionIndex];
          questionNumberEl.textContent = currentQuestionIndex + 1;
          themeNameEl.textContent = q.theme;
          questionTextEl.textContent = q.question;

          explanationBoxEl.style.display = "none";
          explanationBoxEl.textContent = "";
          optionsListEl.innerHTML = "";
          answeredCurrent = false;
          nextBtn.disabled = true;

          for (var i = 0; i < q.options.length; i++) {
            (function (index) {
              var opt = q.options[index];
              var li = document.createElement("li");
              var button = document.createElement("button");
              button.type = "button";
              button.className = "option";
              button.setAttribute("data-index", index);

              var label = document.createElement("span");
              label.className = "option-label";
              label.textContent = String.fromCharCode(65 + index);

              var text = document.createElement("span");
              text.className = "option-text";
              text.textContent = opt;

              button.appendChild(label);
              button.appendChild(text);

              button.addEventListener("click", function () {
                handleOptionClick(index);
              });

              li.appendChild(button);
              optionsListEl.appendChild(li);
            })(i);
          }
        }

        function handleOptionClick(optionIndex) {
          if (answeredCurrent) return;

          var q = quizQuestions[currentQuestionIndex];
          var isCorrect = optionIndex === q.correctIndex;

          var optionButtons = optionsListEl.querySelectorAll(".option");
          for (var i = 0; i < optionButtons.length; i++) {
            var btn = optionButtons[i];
            btn.classList.add("disabled");
            if (i === q.correctIndex) {
              btn.classList.add("correct");
            }
            if (i === optionIndex && !isCorrect) {
              btn.classList.add("incorrect");
            }
          }

          if (isCorrect) {
            score++;
            updateScore();
          }

          explanationBoxEl.style.display = "block";
          explanationBoxEl.innerHTML =
            "<strong>" + (isCorrect ? "Goed!" : "Bijna…") + "</strong> " + q.explanation;

          answeredCurrent = true;
          nextBtn.disabled = false;

          if (currentQuestionIndex === quizQuestions.length - 1) {
            nextBtn.textContent = "Bekijk jouw dorpsprofiel";
          } else {
            nextBtn.textContent = "Volgende vraag →";
          }
        }

        function updateScore() {
          scoreTextEl.textContent =
            score + " goede antwoord" + (score === 1 ? "" : "en");
        }

        function updateProgress() {
          var progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
          progressFillEl.style.width = progress + "%";
          progressLabelEl.textContent = Math.round(progress) + "%";
        }

        function showResults() {
          var total = quizQuestions.length;
          var percentage = Math.round((score / total) * 100);
          var message;

          if (percentage >= 80) {
            message =
              "Je kent onze plannen goed – jouw hart klopt duidelijk voor Zandvoort én voor de dorpspartij CDA.";
          } else if (percentage >= 50) {
            message =
              "Mooi begin! Je deelt al veel waarden met CDA Zandvoort. Praat eens met ons verder over jouw ideeën voor het dorp.";
          } else {
            message =
              "Interessant! Deze quiz laat zien waar we verschillen en waar we elkaar kunnen vinden. We gaan graag met je in gesprek.";
          }

          resultsBannerEl.style.display = "block";
          resultsBannerEl.innerHTML =
            "<strong>Jouw dorpsprofiel:</strong> " +
            score +
            " van de " +
            total +
            " goed (" +
            percentage +
            "%). " +
            message;
        }

        nextBtn.addEventListener("click", function () {
          if (!answeredCurrent) return;

          if (currentQuestionIndex < quizQuestions.length - 1) {
            currentQuestionIndex++;
            loadQuestion();
            updateProgress();
          } else {
            updateProgress();
            showResults();
            nextBtn.disabled = true;
          }
        });

        restartBtn.addEventListener("click", function () {
          initQuiz();
        });

        function initThemeChips() {
          var usedThemes = [];
          for (var i = 0; i < quizQuestions.length; i++) {
            var t = quizQuestions[i].theme;
            if (usedThemes.indexOf(t) === -1) {
              usedThemes.push(t);
            }
          }

          for (var j = 0; j < usedThemes.length; j++) {
            (function (theme, index) {
              var chip = document.createElement("button");
              chip.type = "button";
              chip.className = "chip" + (index === 0 ? " active" : "");
              chip.setAttribute("data-theme", theme);

              var dot = document.createElement("span");
              dot.className = "chip-dot";

              var label = document.createElement("span");
              label.textContent = theme;

              chip.appendChild(dot);
              chip.appendChild(label);

              chip.addEventListener("click", function () {
                selectTheme(theme);
              });

              themeChipsEl.appendChild(chip);
            })(usedThemes[j], j);
          }

          if (usedThemes.length > 0) {
            updateThemeDetails(usedThemes[0]);
          }
        }

        function selectTheme(theme) {
          var chips = themeChipsEl.querySelectorAll(".chip");
          for (var i = 0; i < chips.length; i++) {
            var chip = chips[i];
            var isActive = chip.getAttribute("data-theme") === theme;
            if (isActive) {
              chip.classList.add("active");
            } else {
              chip.classList.remove("active");
            }
          }
          updateThemeDetails(theme);
        }

        function updateThemeDetails(theme) {
          var info = themeSummaries[theme];
          if (!info) return;
          themeDetailsEl.innerHTML =
            "<h3>" + info.title + "</h3><p>" + info.text + "</p>";
        }

        initQuiz();
        initThemeChips();
      }

      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", startQuiz);
      } else {
        startQuiz();
      }
    })();
  </script>
</div>
